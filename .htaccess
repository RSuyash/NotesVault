<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Optional: Redirect HTTP to HTTPS (Uncomment if needed)
  # RewriteCond %{HTTPS} off
  # RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  # --- API Rule ---
  # Do not rewrite requests for the API directory
  RewriteRule ^api/ - [L]

  # --- React App Rule (Handles SPA routing in /notesvault/) ---
  # If the request is NOT for an existing file
  RewriteCond %{REQUEST_FILENAME} !-f
  # And the request is NOT for an existing directory
  RewriteCond %{REQUEST_FILENAME} !-d
  # Then rewrite the request to the React app's entry point in the subdirectory
  # This allows requests like /notesvault/dashboard to be handled by React Router
  RewriteRule ^ /notesvault/index.html [L]

  # Note: Requests for existing files/directories (like /api/*, /notesvault/assets/*, /notesvault/logo.png)
  # will not match the RewriteCond conditions above and will be served directly by Apache.
  # The ^api/ rule above explicitly prevents API requests from being rewritten.

</IfModule>